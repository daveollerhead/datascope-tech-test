pipeline {
  agent any

  triggers {
    pollSCM('* * * * *')
  }

  stages {
    // stage ('Clean workspace') {
    //   steps {
    //     cleanWs()
    //   }
    // } 

    stage('Restore packages') {
      steps {
        bat "dotnet restore Api/DatascopeTest.sln"
      }
    }

    stage('Build') {
      steps {
        bat "dotnet build Api/DatascopeTest.sln"
      }
    }

    stage('Test') {
      steps {
        bat "dotnet test Api/DatascopeTest.sln"
      }
    }
  }
}